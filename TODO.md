# AVM2 系统开发 TODO

## 已完成
- ✅ 重构系统Agent类到独立文件
  - `agent_creator_output_agent.py` - Agent创建器
  - `system_monitor_input_agent.py` - 系统监控器
  - `user_input_agent.py` - 用户输入Agent（带GUI）

- ✅ 完善日志系统
  - 统一的日志格式和级别
  - 每个类独立的日志文件
  - 详细的调试信息

- ✅ 系统Agent配置
  - 所有系统Agent都有对应的YAML配置文件
  - 支持动态类型创建
  - 完整的连接关系配置

## 当前状态

**系统状态**: 基础框架完成，系统可运行  
**可用功能**: 用户输入、系统监控、Agent创建  
**测试状态**: 基础功能测试通过  

## 待实现需求

### 高优先级

#### 1. 系统Agent探查Agent
- **功能**: 向系统发送"有什么系统Agent可用，怎么用"查询
- **类型**: IOAgent（需要消息输入才会输出）
- **描述**: 查询系统内可用的系统Agent及其使用方法
- **实现要点**:
  - 动态发现系统Agent
  - 生成使用说明文档
  - 支持语义查询
  - 创建对应的YAML配置文件

#### 2. 系统测试和验证
- **功能**: 完整的系统集成测试
- **描述**: 验证所有系统Agent的协同工作
- **测试内容**:
  - 用户输入到系统响应的完整流程
  - 消息传递的正确性
  - 文件同步的可靠性
  - 错误处理和恢复

### 中优先级

#### 3. 系统Agent自动YAML生成
- **功能**: 在创建系统Agent类时自动生成对应的YAML配置文件
- **描述**: 确保每个系统Agent都有对应的配置文件，便于系统加载
- **实现要点**:
  - 类装饰器或基类自动生成
  - 配置模板管理
  - 文件路径自动计算

#### 4. 系统配置管理
- **功能**: 统一的系统配置管理
- **描述**: 管理所有系统级别的配置
- **实现要点**:
  - 配置验证和默认值
  - 运行时配置更新
  - 配置版本管理

### 低优先级

#### 5. 系统监控增强
- **功能**: 更详细的系统状态监控
- **描述**: 提供更全面的系统运行状态信息
- **实现要点**:
  - 性能指标收集
  - 资源使用监控
  - 异常检测和报警

#### 6. 用户界面改进
- **功能**: 增强用户交互体验
- **描述**: 改进GUI界面和交互方式
- **实现要点**:
  - 界面美化
  - 更多输入选项
  - 历史记录查看

## 技术债务

### 代码质量
- [ ] 添加更多单元测试
- [ ] 完善错误处理机制
- [ ] 优化性能瓶颈
- [ ] 代码文档完善

### 系统稳定性
- [ ] 处理网络连接异常
- [ ] 实现优雅的关闭机制
- [ ] 添加健康检查
- [ ] 实现自动恢复

## 设计原则

### 语义自举
1. **表达能力等价性**: 新Agent表达能力 ≥ 原Agent表达能力
2. **语义体系与编程体系分离**: YAML配置描述语义，Python类实现逻辑
3. **文件同步机制**: 所有Agent类必须实现 `sync_to_file` 和 `sync_from_file` 方法

### 三界分离
1. **实在界**: 物理世界反馈
2. **想象界**: 语义处理
3. **象征界**: 知识库

### 微Agent架构
1. **弱主体性**: RNA式原初实体
2. **组合性**: 通过组合实现复杂行为
3. **演化性**: 支持淘汰和变异

## 技术规范

### 代码规范
- 所有Agent类必须实现 `sync_to_file` 和 `sync_from_file` 方法
- 系统Agent YAML文件必须包含 `class_name` 字段
- 使用动态类型创建：`eval(class_name)`
- 统一异步编程模式：`async/await`
- 添加适当的类型注解

### 日志规范
- 使用统一的日志格式
- 每个类有独立的日志文件
- 包含足够的调试信息
- 支持日志级别控制

### 配置规范
- 使用YAML格式配置文件
- 支持人类可读的配置
- 包含必要的元数据
- 支持配置验证

## 文件结构规划

```
system_interface_agents/
├── agent_creator_output_agent.py    # Agent创建器
├── system_monitor_input_agent.py    # 系统监控器
├── user_input_agent.py              # 用户输入Agent
├── system_explorer_agent.py         # [TODO] 系统探查Agent
└── config_manager_agent.py          # [TODO] 配置管理Agent
```

## 优先级排序

1. **系统Agent探查Agent** - 增强系统自描述性
2. **系统测试和验证** - 确保系统稳定性
3. **自动YAML生成** - 简化系统Agent部署
4. **系统配置管理** - 统一配置管理
5. **系统监控增强** - 更好的运维支持
6. **用户界面改进** - 提升用户体验

## 里程碑计划

### 里程碑 1: 基础系统完成 ✅
- [x] 核心框架实现
- [x] 基础系统Agent
- [x] 文件同步机制
- [x] 日志系统

### 里程碑 2: 系统完善（当前）
- [ ] 系统Agent探查Agent
- [ ] 完整系统测试
- [ ] 自动YAML生成

### 里程碑 3: 生产就绪
- [ ] 系统配置管理
- [ ] 系统监控增强
- [ ] 用户界面改进
- [ ] 性能优化

## 贡献指南

1. 选择感兴趣的任务
2. 遵循项目代码风格
3. 添加适当的测试
4. 更新相关文档
5. 提交Pull Request

---

**更新日期**: 2025-10-09  
**当前版本**: v1.0.0  
**负责人**: 项目维护团队